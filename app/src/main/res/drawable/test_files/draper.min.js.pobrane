!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define("time_dfp",[],e):"object"==typeof exports?exports.time_dfp=e():t.time_dfp=e()}(this,function(){return function(t){function e(n){if(i[n])return i[n].exports;var o=i[n]={i:n,l:!1,exports:{}};return t[n].call(o.exports,o,o.exports,e),o.l=!0,o.exports}var i={};return e.m=t,e.c=i,e.d=function(t,i,n){e.o(t,i)||Object.defineProperty(t,i,{configurable:!1,enumerable:!0,get:n})},e.n=function(t){var i=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(i,"a",i),i},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="//assets.time.com/draper/",e(e.s=29)}([function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.doesQueryStringContainPII=e.refreshableSlots=e.refreshWhitelist=e.hasSlot=e.getDebugMode=e.setAndCheckLocalStorageVars=e.isLocalStorageAvailable=e.isSponsored=e.SponsorType=e.includesDuplicate=e.addSize=e.unitHasSize=e.hasSize=e.sanitize=e.getUrlTargeting=e.extend=e.sizeStringToArray=e.sizeToArray=e.setCookie=e.getCookie=e.isSecure=e.isTestMode=e.isDebugMode=e.getSubDomain=e.getRootDomain=e.logTypes=void 0;var n=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])}return t},o=i(2),r=function(t){return t&&t.__esModule?t:{default:t}}(o),a=i(1),s=i(3),l=(e.logTypes={info:"info",error:"error",amazon:"amazon",indexExchange:"indexExchange",refresh:"refresh"},e.getRootDomain=function(){var t=r.default.getWindow().location.hostname,e=t.split(".");return void 0===e[1]||1===e.length?t:e[e.length-2]+"."+e[e.length-1]},e.getSubDomain=function(){return document.domain},e.isDebugMode=function(){var t=r.default.getWindow(),e=t.location,i=t.time_dfp;return-1!==e.search.indexOf("debugads")||void 0!==i&&void 0!==i.config&&i.config.debug},e.isTestMode=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return-1!==r.default.getWindow().location.search.indexOf("testads")||void 0!==t.testads},e.isSecure=function(){return"https:"===r.default.getWindow().document.location.protocol},e.getCookie=function(t){if(!t)return null;var e=r.default.getWindow().document.cookie;return decodeURIComponent(e.replace(new RegExp("(?:(?:^|.*;)\\s*"+encodeURIComponent(t).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=\\s*([^;]*).*$)|^.*$"),"$1"))||null},e.setCookie=function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:365,n="";if(i){var o=new Date;o.setTime(o.getTime()+24*i*60*60*1e3),n="; expires="+o.toUTCString()}document.cookie=t+"="+(e||"")+n+"; path=/"},function(t){return Array.isArray(t)?t[0]+"x"+t[1]:t}),d=e.sizeToArray=function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return Array.isArray(t)?"number"==typeof t[0]?e?l(t):[t]:e?t.map(l):t:[]},c=(e.sizeStringToArray=function(t){return Array.isArray(t)?t:t.split("x").map(Number)},e.extend=function(){for(var t=arguments.length,e=Array(t>1?t-1:0),i=1;i<t;i++)e[i-1]=arguments[i];var o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return n.apply(void 0,[o].concat(e))},e.getUrlTargeting=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:r.default.getWindow().location.toString(),e=t.match(/^(([^:/?#]+):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?/);return{Host:e[4]||"",Path:(e[5]||"").replace(/(.)\/$/,"$1"),Query:(e[7]||"").replace(/\=/gi,":").split("&")}}),u=(e.sanitize=function(t,e){var i=t;return"string"==typeof t&&(e.convertHyphens&&(i=i.replace(/-/gi,"_")),e.stripNonAlphaNumeric&&(i=i.replace(/[^\w\/]/gi,""))),i},e.hasSize=function(t,e){var i=d(t);return Array.isArray(i)?i.some(function(t){return-1!==t.indexOf(e)}):-1!==i.indexOf(e)}),f=(e.unitHasSize=function(t,e){return!(void 0===t.sizes||!t.sizes.some(function(t){return u(t[1],e)}))||u(t.size,e)},e.addSize=function(t,e){if(!u(t.size,e)){var i=d(t.size,!1);i.push(e),t.size=i}void 0!==t.sizes&&t.sizes.forEach(function(t){if(!u(t[1],e)){var i=d(t[1],!1);i.push(e),t[1]=i}})},function(t){return t}),g=(e.includesDuplicate=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:f,i={};return t.some(function(t){var n=e(t);if(void 0===n)return!1;var o=i[n];return i[n]=!0,o})},e.SponsorType={SPONSOR:"SPONSOR",NONE:"NONE"}),p=(e.isSponsored=function(t,e){return e[t]===g.SPONSOR},e.isLocalStorageAvailable=function(){var t=window.localStorage;try{return t.setItem("tgxTest","1"),t.removeItem("tgxTest"),!0}catch(t){return!1}}),h=(e.setAndCheckLocalStorageVars=function(){console.log("Getting PV value");var t=Date.now(),e=!1,i=0;return p()&&(window.localStorage.tgxAdSessionTTL||window.localStorage.setItem("tgxAdSessionTTL",t+432e5),t>window.localStorage.tgxAdSessionTTL&&(e=!0,window.localStorage.setItem("tgxAdSessionTTL",t+432e5)),i=e||null===window.localStorage.getItem("tgxAdPageCount")?0:parseInt(window.localStorage.tgxAdPageCount,10),i++,console.log("PV value set to",i),window.localStorage.setItem("tgxAdPageCount",i)),i},e.getDebugMode=function(){var t=r.default.getWindow(),e=t.location,i=t.time_dfp,n=e&&e.href?e.href.substring(e.href.indexOf("debugads=")+9,e.href.length):"";return n?n.split("&")[0]:!(void 0===i||void 0===i.config||!i.config.debugads)&&i.config.debugads},e.hasSlot=function(t,e){return t.some(function(t){return t.id===e})},e.refreshWhitelist={desktop:{"970x90":!0,"728x90":!0,"970x250":!0,"300x250":!0,"300x600":!0,"160x600":!0},mobile:{"300x50":!0,"320x50":!0,"300x250":!0,"320x480":!0},tablet:{"728x90":!0,"300x600":!0,"300x250":!0}}),v=(e.refreshableSlots=function(t){return t.filter(function(t){return"cm"!==t.dfpSlot.getAdUnitPath().split("/")[2].slice(0,2)&&h[(0,a.getPlatform)()][t.tracking.size]&&t.tracking[s.EventName.SLOT_VISIBILITY_CHANGED]})},/[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,}/i);e.doesQueryStringContainPII=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:r.default.getWindow().location.toString();return v.test(t)||c(t).Query.some(function(t){return"email"===t.split(":")[0]})}},function(t,e,i){"use strict";function n(t){if(Array.isArray(t)){for(var e=0,i=Array(t.length);e<t.length;e++)i[e]=t[e];return i}return Array.from(t)}Object.defineProperty(e,"__esModule",{value:!0}),e.getPlatform=e.getUUID=e.getStringBool=e.debounce=e.throttle=e.hasClass=e.removeClass=e.addClass=e.clone=e.noop=e.getPixelsInViewPort=e.getElementInViewPort=e.appendScriptToHead=e.prependScriptToHead=void 0;var o=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])}return t},r=i(0),a=i(2),s=function(t){return t&&t.__esModule?t:{default:t}}(a),l=(e.prependScriptToHead=function(t){var e=o(document.createElement("script"),t),i=document.getElementsByTagName("script")[0];return i.parentNode.insertBefore(e,i)},e.appendScriptToHead=function(t){var e=o(document.createElement("script"),t);return document.head.appendChild(e)},e.getElementInViewPort=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=n||t.getBoundingClientRect(),r=s.default.getWindow().innerHeight||document.documentElement.clientHeight;return i?o.top>=-e&&o.top<=r+e||o.bottom>=-e&&o.bottom<=r+e:o.top>=-e&&o.bottom<=r+e},e.getPixelsInViewPort=function(t){var e=t.getBoundingClientRect(),i=s.default.getWindow().innerHeight||document.documentElement.clientHeight;return e.bottom>i||e.top>=0?{from:"top",px:i-e.top}:{from:"bottom",px:e.bottom}},e.noop=function(){},e.clone=function(t){return JSON.parse(JSON.stringify(t))},e.addClass=function(t,e){t.classList?t.classList.add(e):t.className=t.className+" "+e},e.removeClass=function(t,e){if(t.classList)t.classList.remove(e);else{var i=e.split(" ").join("|");t.className=t.className.replace(new RegExp("(^|\\b)"+i+"(\\b|$)","gi")," ")}},e.hasClass=function(t,e){return t.classList?t.classList.contains(e):new RegExp("(^| )"+e+"( |$)","gi").test(t.className)},{START:0,END:1,THROTTLING:2});e.throttle=function(t,e){var i=l.START,o=void 0,r=function r(){i=l.END,t.apply(void 0,n(o)),o=void 0,setTimeout(function(){if(i===l.THROTTLING)return r();i=l.START},e)};return function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];if(o=e,i===l.START)return r();i=l.THROTTLING}},e.debounce=function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(t){for(var e=arguments.length,i=Array(e>1?e-1:0),n=1;n<e;n++)i[n-1]=arguments[n];return i};return function n(){clearTimeout(n.timeout);for(var o=arguments.length,r=Array(o),a=0;a<o;a++)r[a]=arguments[a];n.args=i.apply(void 0,[n.args].concat(r)),n.timeout=setTimeout(function(){t.apply(null,n.args),n.args=void 0},e)}},e.getStringBool=function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=["0","false","null","undefined"],n=["1","true"];return-1===i.indexOf(String(t).toLowerCase())&&(-1!==n.indexOf(String(t).toLowerCase())||(e?t:Boolean(t)))},e.getUUID=function(){var t=s.default.getWindow().performance.now();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var i=(t+16*Math.random())%16|0;return t=Math.floor(t/16),("x"===e?i:3&i|8).toString(16)})},e.getPlatform=function(){var t=s.default.getWindow().navigator.userAgent,e=(0,r.getCookie)("TI_PREFS");return t.match(/iPad/i)||"tablet"===e?"tablet":t.match(/Mobi/)||"phone"===e||"iphone"===e?"mobile":"desktop"}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){return window},o=function(){return document};e.default={getWindow:n,getDocument:o},t.exports=e.default},function(t,e,i){"use strict";function n(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function o(t,e){var i={};for(var n in t)e.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(t,n)&&(i[n]=t[n]);return i}Object.defineProperty(e,"__esModule",{value:!0});var r,a,s=e.Namespace={TGX:"tgx",GPT:"gpt",ADS:"ads"},l=e.EventName={LOAD:"load",INIT:"init",SLEEP:"sleep",WAKE:"wake",CALLED:"called",SLOT_DISPLAY:"display",SLOT_AFTER_DISPLAY:"afterDisplay",SLOT_RENDER_ENDED:"slotRenderEnded",SLOT_ONLOAD:"slotOnload",IMPRESSION_VIEWABLE:"impressionViewable",SLOT_VISIBILITY_CHANGED:"slotVisibilityChanged"},d=(e.gptEvents=[l.SLOT_RENDER_ENDED,l.SLOT_ONLOAD,l.IMPRESSION_VIEWABLE],e.recordNow=function(){return Math.round(100*window.performance.now())/100}),c=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=e.dfp,n=e.arg,r=o(e,["dfp","arg"]),a={date:d(),type:t,details:r};return n!==i&&(a.details.arg=n),a};e.formatData=c;var u=(r={},n(r,l.SLOT_RENDER_ENDED,"slot-Rendered"),n(r,l.SLOT_ONLOAD,"slot-Loaded"),n(r,l.IMPRESSION_VIEWABLE,"slot-View"),r);e.formatSlotData=function(t,e,i){return{size:i.tracking.size,slotId:i.id,slotName:e.slot.getAdUnitPath(),event:u[t],service:e.serviceName,advertiserId:e.advertiserId,campaignId:e.campaignId,creativeId:e.creativeId,labelIds:e.labelIds,lineItemId:e.lineItemId,defineTime:i.tracking.define||0,defineActualTime:i.tracking.defineActual||0,displayTime:i.tracking.display||0,renderTime:i.tracking[l.SLOT_RENDER_ENDED]||0,loadTime:i.tracking[l.SLOT_ONLOAD]||0,viewTime:i.tracking[l.IMPRESSION_VIEWABLE]||0}},e.default={events:(a={},n(a,s.TGX,{}),n(a,s.GPT,{}),n(a,s.ADS,{}),a),trackEvent:function(t,e,i,n){var o=t+"."+e+(void 0===i?"":"."+i),r=c(o,n);return this.events[t]=this.events[t]||{},this.events[t][e]=this.events[t][e]||[],void 0===i?this.events[t][e].push(r):this.events[t][e][i]=r,r}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.fireEvents=void 0,e.default=function(){var t={fireEvents:o,preInit:[],onInit:[],onAfterInit:[],onRefresh:[],onSlotRefresh:[],defineSlot:[],beforeDefineSlot:[],afterdefineSlot:[],displaySlot:[],slotOnload:[],getVideoBids:[],onTagResponse:[],blockLoad:!1};return window.addEventListener("dfp.preInit",function(e){o(t.preInit,[e.detail.dfp])}),window.addEventListener("dfp.beforeInit",function(e){o(t.onInit,[e.detail.dfp])}),window.addEventListener("dfp.afterInit",function(e){o(t.onAfterInit,[e.detail.dfp])}),window.addEventListener("dfp.defineSlot",function(e){o(t.defineSlot,[e.detail.dfp,e.detail.arg])}),window.addEventListener("dfp.slotBeforeDefine",function(e){o(t.beforeDefineSlot,[e.detail.dfp,e.detail.arg])}),window.addEventListener("dfp.slotAfterDefine",function(e){o(t.afterdefineSlot,[e.detail.dfp,e.detail.arg])}),window.addEventListener("dfp.slotBeforeDisplay",function(e){o(t.displaySlot,[e.detail.dfp,e.detail.arg])}),window.addEventListener("dfp.refresh",function(e){o(t.onRefresh,[e.detail.dfp,e.detail.arg])}),window.addEventListener("dfp.slotRefresh",function(e){o(t.onSlotRefresh,[e.detail.dfp,e.detail.arg])}),window.addEventListener("dfp.slotOnload",function(e){o(t.slotOnload,[e.detail.dfp,e.detail.arg])}),window.addEventListener("dfp.getVideoBids",function(e){o(t.getVideoBids,[e.detail.dfp,e.detail.arg])}),window.addEventListener("dfp.tagResponse",function(e){o(t.onTagResponse,[e.detail.dfp,e.detail.arg])}),t};var n=i(0),o=e.fireEvents=function(t,e){t.forEach(function(t){try{t.apply(window,e)}catch(e){window.time_dfp.log(n.logTypes.error,"error: tracking.fireEvents - "+t.toString()+"\n"+e)}})}},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=i(4),r=n(o),a=i(6),s=n(a),l=i(7),d=n(l),c=i(8),u=n(c),f=i(9),g=n(f),p=i(10),h=n(p),v=i(11),y=n(v),m=i(12),w=n(m),S=i(13),b=n(S),x=i(3),T=n(x),E=i(14),k=n(E),A=i(15),_=n(A);e.default=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,r.default)();return window.TIA=window.TIA||{},window.googletag=window.googletag||{},window.googletag.cmd=window.googletag.cmd||[],T.default.trackEvent(x.Namespace.TGX,x.EventName.LOAD),window.dfp_tracking=t,(0,s.default)(t),(0,_.default)(t),(0,d.default)(t),(0,u.default)(t),(0,g.default)(t),(0,k.default)(t),(0,h.default)(),(0,y.default)(),(0,w.default)(),(0,b.default)(t)},t.exports=e.default},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.onDefineSlot=e.onInit=void 0,e.default=function(t){t.onInit.push(r),t.defineSlot.push(a),t.beforeDefineSlot.push(s)};var n=i(1),o=function(t){var e=t;Array.isArray(e)&&(e=e[0]),e=e.toLowerCase();var i={"2015 Destination Guide":"app",advertorialpage:"page",article:"article",author:"profile",blog:"post",blog_tout:"post",bracket:"bracket",business_listing:"page",business_listing_landing_page:"landing_page",calculator:"app",calendar:"slideshow",category:"category",channel:"category","channel-layout":"category","check-list":"app",checklist:"app",collection:"collection",condition_center:"app",content:"page","content-package":"category",covevideo:"video",daily_finds:"app",e_commerce_hub:"landing_page",featurepackage:"category",franchise:"page",gallery:"slideshow",generic:"page",genericpage:"page",hgallery:"slideshow",home:"homepage",homepage:"homepage","how-to":"?",image_list:"photos",index:"category",list:"app",listicle:"article",longform:"article",magazine:"page",main:"category",makeover:"app","multi-tag":"tag",multi_tag_page:"tag","new-uses-gallery":"slideshow",odds:"odds",optimizer:"optimizer",package:"category",package_flex:"category",page:"page","photo-gallery":"photos",photos:"photos",planner:"app",plant:"app",post:"post",poy:"article",print:"print",product:"product",profile:"profile",rankings:"rankings",recap:"article",recipe:"recipe",recipe_hub:"recipe_hub",reviews:"reviews",schedules:"schedules",scrollinggallery:"slideshow",search:"search",Search:"search",section:"category","Section Front":"category",sectionfront:"category",section_front:"category",shoppinghub:"product",slideshow:"slideshow",specialsectionpage:"category",standings:"standings",stats:"stats",storied:"app",subchannel:"category",syndicated_slideshow:"slideshow",tag:"tag",tags:"tag",text_list:"page",timeline:"app",topic:"category","topic-page":"category",topic_page:"category",topicpagechild:"category",tout:"page",tv_recap_subchannel:"category",vertical_gallery:"slideshow",video:"video",video_article:"video_article",video_landing_page:"video_hub","video-archive":"video_hub","video-series":"video_playlist",videos:"video_hub",video_hub:"video_hub",video_recipe:"video_recipe",video_playlist:"video_playlist"};return e&&""!==e&&i[e]?i[e]:"none"},r=e.onInit=function(t){void 0===t.config.karma&&(t.config.karma=!1,t.config.karmaKv=!0),void 0===t.config.karmapath&&(t.config.karmapath=!1),t.config.karmapath&&(t.config.karma=!0,t.config.karmaKv=!0,t.config.krux=!0),t.config.karma&&(t.config.setTargeting.ch||(t.config.setTargeting.ch=""),Array.isArray(t.config.setTargeting.ch)&&(t.config.setTargeting.ch=t.config.setTargeting.ch.join("-")),t.config.setTargeting.ctype||(t.config.setTargeting.ctype="none"),t.config.setTargeting.type||(t.config.setTargeting.type=o(t.config.setTargeting.ctype)))},a=e.onDefineSlot=function(t,e){if(t.config.karma){var i=o(t.config.setTargeting.ctype),r=t.config.setTargeting.ch?t.config.setTargeting.ch+"/":"";e.karmazone="tim.mdp."+("mobile"===(0,n.getPlatform)()?"mob":"com")+"/"+r+i,t.config.karmaKv&&(e.targeting.slot=e.id)}},s=function(t,e){t.config.karmapath&&(e.path="/"+t.config.dfpId+"/"+e.karmazone)}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.onDisplaylot=e.onRefresh=e.onAfterDefineSlot=e.applyAmazon=e.getBiddableSlots=e.onInit=e.addAmazon=void 0,e.default=function(t){t.onInit.push(a),t.onRefresh.push(c),t.displaySlot.push(u)};var n=i(3),o=function(t){return t&&t.__esModule?t:{default:t}}(n),r=e.addAmazon=function(){!function(t,e,i,n,o,r,a){function s(i,n){e[t]._Q.push([i,n])}e[t]||(e[t]={init:function(){s("i",arguments)},fetchBids:function(){s("f",arguments)},setDisplayBids:function(){},targetingKeys:function(){return[]},_Q:[]},r=i.createElement(n),r.async=!0,r.src="//c.amazon-adsystem.com/aax2/apstag.js",a=i.getElementsByTagName(n)[0],a.parentNode.insertBefore(r,a))}("apstag",window,document,"script")},a=e.onInit=function(t){if(!1!==t.config.amazon){var e=t.sleep("amazon");o.default.trackEvent("amazon",n.EventName.LOAD,0),r(),window.apstag.init({pubID:"3928",adServer:"googletag",videoAdServer:"DFP",bidTimeout:t.config.sleepTime},function(){o.default.trackEvent("amazon",n.EventName.LOAD,1),t.wakeup("amazon",e)})}},s=["970x90","728x90","970x250","300x250","300x600","320x480","100x1"],l=e.getBiddableSlots=function(t){return t.filter(function(t){return t.adUnit.size&&!t.tracking.amazonBidReq&&(Array.isArray(t.adUnit.size[0])?t.adUnit.size.some(function(t){return-1!==s.indexOf(t.join("x"))}):-1!==s.indexOf(t.adUnit.size.join("x")))}).map(function(t){return{slotID:t.id,slotName:t.id,sizes:Array.isArray(t.adUnit.size[0])?t.adUnit.size.filter(function(t){return Array.isArray(t)&&-1!==s.indexOf(t.join("x"))}):[t.adUnit.size]}})},d=e.applyAmazon=function(t,e){if(!1!==t.config.amazon&&e.length>0){var i=t.sleep("amazon");e.forEach(function(e){t.getAdSlot(e.slotID).tracking.amazonBidReq=(0,n.recordNow)()}),window.apstag.fetchBids({slots:e},function(){var e;window.googletag.cmd.push((e=window.apstag).setDisplayBids.bind(e)),t.wakeup("amazon",i)})}},c=(e.onAfterDefineSlot=function(t,e){var i=l([e]);d(t,i)},e.onRefresh=function(t,e){var i=e.map(function(e){var i=t.getAdUnitByAdId(e);return i.tracking.amazonBidReq=null,i}),n=l(i);d(t,n)}),u=e.onDisplaylot=function(t){var e=l(t.state.slots);d(t,e)}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.onInit=void 0,e.default=function(t){t.onInit.push(a)};var n=i(1),o=i(2),r=function(t){return t&&t.__esModule?t:{default:t}}(o),a=e.onInit=function(t){var e=r.default.getDocument();t.config.setTargeting=t.config.setTargeting||{},t.config.setTargeting.plat=(0,n.getPlatform)();var i=e.referrer.split("/")[2];t.config.setTargeting.domain=e.URL.split("/")[2],""!==e.referrer&&(t.config.setTargeting.rhost=i),void 0!==i&&i===t.config.setTargeting.domain||(t.config.setTargeting.pu=0)}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.MOAT_TIMEOUT=void 0,e.default=function(t){t.onInit.push(a)};var n=i(1),o=e.MOAT_TIMEOUT=1e3,r=function(){return new Promise(function(t){var e=setTimeout(function(){t({moatYieldTimedOut:!0})},o);window.moatYieldReady=function(){if(clearTimeout(e),!window.moatPrebidApi)return t({moatYieldUnavailable:!0});var i=window.moatPrebidApi.setMoatTargetingForAllSlots;return i&&i(),t({moatYieldLoaded:!0})}})},a=function(t){(0,n.appendScriptToHead)({async:!0,src:"https://z.moatads.com/timeincheader121325925977/moatheader.js"}),r().then(function(e){if(e.moatYieldLoaded){var i=window.moatPrebidApi.getMoatTargetingForPage();i&&(t.config.setTargeting.m_data=i.m_data,t.config.setTargeting.m_safety=i.m_safety,t.config.setTargeting.m_categories=i.m_categories)}})}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.logMsg=e.createDebugInfo=e.addDebugStyle=void 0,e.default=function(){var t=performance.timing?(performance.timing.fetchStart-performance.timing.navigationStart)/1e3:window.performance.now();window.addEventListener("dfp.beforeInit",function(){if((0,n.isDebugMode)()){var e={navStart_jsExecute:t,navStart_beforeInit:window.performance.now(),responseStart_beforeInit:window.performance.now()};a(n.logTypes.info,"Execution metrics "+JSON.stringify(e),t),o()}}),window.addEventListener("dfp.slotAfterDisplay",function(t){(0,n.isDebugMode)()&&r(t.detail.arg)}),window.addEventListener("dfp.logMsg",function(e){if((0,n.isDebugMode)()){var i=e.detail.dfp.config;a(e.detail.arg,void 0!==i?i.logtimeline:void 0,t)}})};var n=i(0),o=e.addDebugStyle=function(){var t=".ads-debug-info { position: absolute; overflowY: auto; overflowX: auto; width: 300; height: 200; zIndex: 99999; background-color: yellow; text-align: left}",e=document.head||document.getElementsByTagName("head")[0],i=document.createElement("style");i.type="text/css",i.styleSheet?i.styleSheet.cssText=t:i.appendChild(document.createTextNode(t)),e.appendChild(i)},r=e.createDebugInfo=function(t){var e=t.adUnit.id,i=e+"-debuginfo",n=document.getElementById(i);if(null===n){var o=document.getElementById(e),r='<textarea id="'+i+'" style="height: 20px; font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 12px; line-height: normal; font-family: courier; border: 1px solid black; z-index: auto; background-color: rgb(255, 255, 189);">'+t.debugcode.join("\n")+"</textarea>";o.insertAdjacentHTML("beforebegin",r),n=document.getElementById(i)}return n},a=e.logMsg=function(t,e,i){var n=(window.performance.now()-i)/1e3;console.log("dfp.logMsg "+n+": "+t),void 0!==e&&void 0!==console.timeStamp&&console.timeStamp("dfp.logMsg "+n+": "+t)}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.createSlotBeforeDefineFn=e.beforeInit=void 0;var n=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])}return t},o=function(){function t(t,e){var i=[],n=!0,o=!1,r=void 0;try{for(var a,s=t[Symbol.iterator]();!(n=(a=s.next()).done)&&(i.push(a.value),!e||i.length!==e);n=!0);}catch(t){o=!0,r=t}finally{try{!n&&s.return&&s.return()}finally{if(o)throw r}}return i}return function(e,i){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,i);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();e.default=function(){var t=s.default.getWindow();t.addEventListener("dfp.beforeInit",d),t.addEventListener("dfp.slotBeforeDefine",c)};var r=i(0),a=i(2),s=function(t){return t&&t.__esModule?t:{default:t}}(a),l=["cid","debugads","utm_medium","utm_campaign"],d=e.beforeInit=function(t){var e=s.default.getWindow(),i=t.detail.dfp,n=document.referrer.split("/")[2];void 0!==n&&(i.config.setTargeting.rhost=n);var a=e.location.pathname.split("/");a=a[a.length-1]?a.slice(1,a.length):a.slice(1,a.length-1),i.config.setTargeting.path=a,i.config.setTargeting.domain=e.location.hostname,(0,r.getUrlTargeting)().Query.forEach(function(t){var e=t.split(":"),n=o(e,2),r=n[0],a=n[1];-1!==l.indexOf(r)&&(i.config.setTargeting[r]=a)}),i.config.setTargeting.pv=(0,r.setAndCheckLocalStorageVars)()},c=e.createSlotBeforeDefineFn=function(t){var e=t.detail.arg,i=t.detail.dfp;try{e.targeting=n(e.targeting||{},{id:e.id}),void 0!==e.targeting.sz?-1!==e.targeting.sz.indexOf(",")&&(e.targeting.sz=e.targeting.sz.split(",")):e.targeting.sz=e.oop?"1x1":(0,r.sizeToArray)(e.size),(0,r.hasSlot)(i.state.destroyedSlots,e.id)&&(e.targeting.rez=1)}catch(t){}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(){var t=null,e=void 0,i=0;window.addEventListener("dfp.beforeInit",function(i){var r=i.detail.dfp;r.getOopSlotId=function(){return t},r.resetOOPSlot=function(i,a){void 0!==i&&i!==t?(t=i,e=r,o(e,a,t)):n(r,r.config.refreshoop,t)}}),window.addEventListener("dfp.defineSlot",function(i){var n=i.detail.arg,r=i.detail.dfp;r.config.oop&&null===t&&(t="oop_"+Date.now(),e=r,o(r,n.id,t))}),window.addEventListener("dfp.refresh",function(){e&&e.config.oop&&e.config.refreshoop&&i+1e4<Date.now()&&(i=Date.now(),e.refresh(t))})};var n=e.refreshOop=function(t,e,i){e&&null!==i&&t.refresh(i)},o=e.defineOopSlot=function(t,e,i){var n=document.createElement("div");if(n.setAttribute("id",i),n.setAttribute("style","display:none;width:0px;height:0px"),void 0!==e){var o=document.getElementById(e);null!==o&&o.parentNode.insertBefore(n,o)}else document.body.appendChild(n);t.defineSlot({id:i,oop:!0,targeting:{pos:1}})}},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function o(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function r(t){if(Array.isArray(t)){for(var e=0,i=Array(t.length);e<t.length;e++)i[e]=t[e];return i}return Array.from(t)}Object.defineProperty(e,"__esModule",{value:!0}),e.truncateZone=e.getGptCmd=void 0;var a=function(){function t(t,e){var i=[],n=!0,o=!1,r=void 0;try{for(var a,s=t[Symbol.iterator]();!(n=(a=s.next()).done)&&(i.push(a.value),!e||i.length!==e);n=!0);}catch(t){o=!0,r=t}finally{try{!n&&s.return&&s.return()}finally{if(o)throw r}}return i}return function(e,i){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,i);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),s=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])}return t};e.default=function(){var t=function(){var t=this;this.dfpUtil=d,this.log(this.dfpUtil.logTypes.info,"Starting up..."),this.config={setTargeting:{},setLocation:"",setUrlTargeting:!1,enableSingleRequest:!1,SRAInitialBatch:!0,collapseEmptyDivs:!1,refreshExisting:!0,disablePublisherConsole:!1,disableInitialLoad:!1,globalVar:"time_dfp",sleepTime:1600,oop:!0,gptAsync:!0,refreshoop:!1,dfpId:"21801468956",env:"prod",karmapath:!0,halt:!0},this.state={count:0,rendered:0,slots:[],destroyedSlots:[],threads:{main:this.getThreadState()},purge_count:{main:0},purging:{main:!1},wewant:'n"eNow',enabledService:!1,ver:"2020-05-08T16:46:07.117Z",sentiment:null,isValidTraffic:null,pauseIndefinately:!1};var e=window[this.config.globalVar];window[this.config.globalVar]=this,Array.isArray(e)&&e.forEach(function(e){return t.push(e)})},e=t.prototype;return e.getGptCmd=h,e.truncateZone=y,e.getThreadState=function(){return{sleep:0,queue:[],purge_count:0,purging:!1,sleepTimeout:null,sleepInterval:null,sleepStart:null,sleepRound:0}},e.init=function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=s({},e,{setTargeting:s({},e.setTargeting,e.setGlobalTargeting)});if(this.log(this.dfpUtil.logTypes.info,"init()"),p.default.trackEvent(g.Namespace.TGX,g.EventName.INIT),this.dfpUtil.doesQueryStringContainPII()||this.loadGPT(),s(this.config,i),this.setConfig(),this.fireEvent("preInit",this),this.fireEvent("beforeInit",this),this.updateAdsTargeting(this.config),h().push(function(){t.log(t.dfpUtil.logTypes.info,"1st DFP Call"),p.default.trackEvent(g.Namespace.GPT,g.EventName.CALLED)}),this.config.disableInitialLoad&&this.push(function(){h().push(function(){t.log(t.dfpUtil.logTypes.info,"disableInitialLoad() is set.. need to .refresh() to display ads now."),window.googletag.pubads().disableInitialLoad()})}),this.config.enableSingleRequest&&this.push(function(){h().push(function(){t.log(t.dfpUtil.logTypes.info,"enableSingleRequest is set.. in SRA mode"),window.googletag.pubads().enableSingleRequest(),t.log(t.dfpUtil.logTypes.info,"enableSingleRequest is set all slots defined before 1st .display() will be call and rendered all at once")})}),void 0!==this.config.collapseEmptyDivs){var n=this.config.collapseEmptyDivs||void 0;this.push(function(){h().push(function(){t.log(t.dfpUtil.logTypes.info,"collapseEmptyDivs is set to: "+t.config.collapseEmptyDivs),window.googletag.pubads().collapseEmptyDivs(n)})})}return h().push(function(){var e=window.googletag.pubads();g.gptEvents.forEach(function(i){e.addEventListener(i,function(e){var n=t.getAdUnitBySlot(e.slot);n.tracking[i]=(0,g.recordNow)(),e.size&&(n.tracking.size=e.size.join("x")),p.default.trackEvent(g.Namespace.ADS,i,void 0,(0,g.formatSlotData)(i,e,n)),t.fireEvent(i,e,{slotId:n.id})})})}),this.push(function(){h().push(function(){t.log(t.dfpUtil.logTypes.info,"googletag.pubads().setTargeting().."),Object.keys(t.config.setTargeting).forEach(function(e){var i=t.config.setTargeting[e];"number"==typeof i&&(i=String(i)),window.googletag.pubads().setTargeting(e,i)})})}),this.push(function(){t.fireEvent("afterInit",t)}),this},e.setConfig=function(){var t=this,e={amazon:!0,ix:!0,ix2:!0,debugads:!0,dfpId:!0,logtimeline:!0,resizenative:!0,companionslot:!0,optlazy:!0,viewGracePx:!0,pxDivisor:!0,karmapath:!0,adzone:{key:"zone",debugOnly:!0}};d.getUrlTargeting().Query.forEach(function(i){var n=i.split(":"),o=a(n,2),r=o[0],l=o[1];e[r]&&(l=(0,c.getStringBool)(l,!0),!0===e[r]?t.config[r]=l:e[r].debugOnly&&!d.isDebugMode()||(t.config[e[r].key]=l)),"latency"===r&&"0"===l&&s(t.config,{amazon:!1,ix:!1})})},e.pause=function(){var t=!(arguments.length>0&&void 0!==(arguments.length<=0?void 0:arguments[0]))||(arguments.length<=0?void 0:arguments[0]);this.state.pauseIndefinately=t},e.unpause=function(){this.state.pauseIndefinately=!1},e.push=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"main";this.state.threads[e]||(this.state.threads[e]=this.getThreadState());var i=this.state.threads[e];i.sleep<=0&&!i.purging?t.call(this):i.sleep<=0&&i.purging?(this.log(this.dfpUtil.logTypes.info,"push().. purging queue.. queuing function"),i.queue.push(t)):(this.log(this.dfpUtil.logTypes.info,"push().. in sleep mode.. queuing function"),i.queue.push(t))},e.flush=function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"main",i=this.state.threads[e];if(!i.purging){this.log(this.dfpUtil.logTypes.info,"Running Queued calls... purge: "+i.purge_count);var n=i.queue;i.queue=[],i.purging=!0;try{n.forEach(function(e){return e.call(t)})}catch(t){this.log(this.dfpUtil.logTypes.error,"Error trying to wake up running one of the queued function. Purge:"+i.purge_count+"\n"+t)}this.log(this.dfpUtil.logTypes.info,"Ending Queue purge: "+i.purge_count),i.purge_count++,i.purging=!1,i.queue.length>0&&i.sleep<=0&&(this.log(this.dfpUtil.logTypes.info,"Calling calls queued during purge."),this.flush(e))}},e.sleep=function(t){var e=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.config.sleepTime,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"main";this.state.threads[n]||(this.state.threads[n]=this.getThreadState());var o=this.state.threads[n],r=o.sleepRound,a=t?" - MSG: "+t:"";if(p.default.trackEvent(g.Namespace.TGX,g.EventName.SLEEP,void 0,{msg:a}),o.sleep>0)return o.sleep++,this.log(this.dfpUtil.logTypes.info,"sleep().. cannot sleep.. already sleeping"+a+" - SleepRound:"+r+" - sleeps:"+o.sleep),o.sleepRound;o.sleep++,this.log(this.dfpUtil.logTypes.info,"sleep() for "+i+" milliseconds"+a+" - SleepRound:"+r),o.sleepTimeout=setTimeout(function(){e.log(e.dfpUtil.logTypes.info,"sleep() Timeout Over"),e.wakeup("time_dfp - Sleep Timeout",r,!0,n)},i);var s=0;return o.sleepStart=Date.now(),o.sleepInterval=setInterval(function(){s++;var t=Date.now();e.log(e.dfpUtil.logTypes.info,"sleepInterval at: "+(t-o.sleepStart)+" interavalRound: "+s),t-o.sleepStart>i&&(e.log(e.dfpUtil.logTypes.info,"sleep() Interval Over"),e.wakeup("time_dfp - Sleep Timeout",r,!0))},i/5),o.sleepRound},e.wakeup=function(t,e,i){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"main",o=this.state.threads[n],r=t?" - MSG: "+t:"";if(p.default.trackEvent(g.Namespace.TGX,g.EventName.WAKE,void 0,{msg:r,force:i}),void 0!==e&&e!==o.sleepRound)return void this.log(this.dfpUtil.logTypes.info,"wakeup() "+r+" -- Not in sleep round");if(o.sleep--,this.log(this.dfpUtil.logTypes.info,"wakeup() "+r+" -- Sleeps left: "+o.sleep+" -- "+(i?" - Forced":"")),o.sleep<=0||i){if(o.sleep=0,window.clearTimeout(o.sleepTimeout),window.clearInterval(o.sleepInterval),o.sleepRound++,this.state.pauseIndefinately)return;this.flush(n)}},e.loadGPT=function(){if(!window.googletag.pubads){var t=!1!==this.config.gptAsync;this.log(this.dfpUtil.logTypes.info,"loading GPT in "+(t?"async":"sync")),p.default.trackEvent(g.Namespace.GPT,g.EventName.LOAD,0),(0,c.prependScriptToHead)({async:t,src:"//www.googletagservices.com/tag/js/gpt.js",onload:function(){return p.default.trackEvent(g.Namespace.GPT,g.EventName.LOAD,1)}})}},e.setNonPersonalizedAds=function(){var t=this;h().push(function(){t.log(t.dfpUtil.logTypes.info,"Setting setRequestNonPersonalizedAds(1)"),window.googletag.pubads().setRequestNonPersonalizedAds(1)})},e.updateAdsTargeting=function(t){var e=this;d.isTestMode(t)&&(this.log(this.dfpUtil.logTypes.info,"updateAdsTargeting() In Test Mode"),void 0!==this.config.testads&&(this.config.setTargeting.test=isNaN(this.config.testads)?1:this.config.testads),d.getUrlTargeting().Query.forEach(function(t){if(-1!==t.indexOf("testads")){var i=t.split(":")[1];e.config.setTargeting.test=isNaN(i)?1:i}}))},e.adUnitPath=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.zone||this.config.zone;return e=e&&"/"!==e?y(("/"===e[0]?"":"/")+d.sanitize(e,{stripNonAlphaNumeric:!0})):"",("/"+this.config.dfpId+"/"+(t.sitename||this.config.sitename)+e).replace(/\/\//g,"/")},e.getAdSlot=function(t,e){if(void 0===t)return this.state.slots.slice();var i=this.state.slots.findIndex(function(e){return e.id===t}),n=this.state.slots[i];return e&&this.state.slots.splice(i,1),n},e.getAdIdBySlot=function(t){return this.getAdUnitBySlot(t).id},e.getAdUnitByAdId=function(t){return this.state.slots.find(function(e){return e.id===t})},e.getAdUnitBySlot=function(t){return this.state.slots.find(function(e){return e.dfpSlot===t})},e.setTargeting=function(t,e){var i=this;void 0===e?h().push(function(){Object.keys(t).forEach(function(e){i.config.setTargeting[e]=t[e],window.googletag.pubads().setTargeting(e,t[e])})}):void 0!==e.targeting&&Object.keys(e.targeting).forEach(function(i){t.setTargeting(i,e.targeting[i])})},e.addSlotTargeting=function(t,e,i){Object.keys(e).forEach(function(i){t.setTargeting(i,e[i])});var n=this.getAdUnitBySlot(t),o="\nADDITIONAL TARGETING"+(void 0!==i?"("+i+")":"")+":"+JSON.stringify(e)+"\n ------ \n";n.debugcode.push(o)},e.defineSlot=function(t){var e=this,i=(0,c.clone)(t);void 0!==this.getAdSlot(i.id)&&h().push(function(){var t=e.getAdSlot(i.id,!0);window.googletag.destroySlots([t.dfpSlot])});var n={tracking:{define:(0,g.recordNow)()}};this.fireEvent("defineSlot",i),this.log(this.dfpUtil.logTypes.info,"defineSlot() called for "+i.id+" - queuing up"),this.push(function(){h().push(function(){if(!i.ignore){n.tracking.defineActual=(0,g.recordNow)();try{i.path=e.adUnitPath(i);var t=[],o=void 0;e.fireEvent("slotBeforeDefine",i),n.id=i.id,n.adUnit=i;var s=i.size;if(void 0!==i.sizes&&(o=window.googletag.sizeMapping(),i.sizes.forEach(function(t){var e=a(t,2),i=e[0],n=e[1];o.addSize(i,n)}),o=o.build()),i.oop?(n.dfpSlot=window.googletag.defineOutOfPageSlot(i.path,i.id),t.push("googletag.defineOutOfPageSlot('"+i.path+"', '"+i.id+"');")):(n.dfpSlot=window.googletag.defineSlot(i.path,s,i.id),t.push("googletag.defineSlot('"+i.path+"', "+JSON.stringify(i.size)+", '"+i.id+"');")),void 0!==o&&(n.dfpSlot.defineSizeMapping(o),t.push("slot.defineSizeMapping(<sizemapping>); sizemapping = "+JSON.stringify(i.sizes))),e.setTargeting(n.dfpSlot,i),t.push(e.getSlotTargeting(n.dfpSlot)),i.companion&&(n.dfpSlot.addService(window.googletag.companionAds()),t.push(".addService(googletag.companionAds());"),e.state.enabledService=!1,e.log(e.dfpUtil.logTypes.info,"setting dfp.state.enabledService to false, as we have a companion ad and the services needs to be enabled again")),n.dfpSlot.addService(window.googletag.pubads()),t.push(".addService(googletag.pubads());"),e.state.slots.push(n),void 0!==i.collapse){if(Array.isArray(i.collapse)){var l;(l=n.dfpSlot).setCollapseEmptyDiv.apply(l,r(i.collapse))}else n.dfpSlot.setCollapseEmptyDiv(i.collapse);t.push(".setCollapseEmptyDiv("+i.collapse+")")}else n.dfpSlot.setCollapseEmptyDiv(),t.push(".setCollapseEmptyDiv();");e.fireEvent("slotAfterDefine",n),n.debugcode=t,e.log(e.dfpUtil.logTypes.info,"slot defined for - "+i.id),e.config.enableSingleRequest&&!e.config.disableInitialLoad||e.displaySlot(n)}catch(t){e.log(e.dfpUtil.logTypes.error,"error: defineSlot - ","\n"+n+"\n",t)}}})})},e.set=function(t,e){this.config[t]=e},e.display=function(t){var e=this;this.log(this.dfpUtil.logTypes.info,".display()"),this.push(function(){h().push(function(){if(e.log(e.dfpUtil.logTypes.info,".display() via gpt.push()"),void 0===t&&e.getAdSlot().forEach(function(t){e.displaySlot(t)}),"string"==typeof t){var i=e.getAdSlot(t);e.displaySlot(i)}else Array.isArray(t)&&t.forEach(function(t){var i=e.getAdSlot(t);e.displaySlot(i)})})})},e.displaySlot=function(t){var e=this;if(!1===this.state.isValidTraffic)return void this.log(this.dfpUtil.logTypes.info,"display() not fired - IVT - invalid traffic indentified.");this.push(function(){h().push(function(){t.tracking.display=(0,g.recordNow)(),e.log(e.dfpUtil.logTypes.info,"before displaying slot - "+t.id),e.fireEvent("slotBeforeDisplay",t.dfpSlot),e.log(e.dfpUtil.logTypes.info,"displaying slot - "+t.id),e.config.disableInitialLoad&&e.log(e.dfpUtil.logTypes.info,"slot - "+t.id+" - may not be rendered and need to be refresh()'ed as disableInitialLoad is set."),e.state.enabledService||(window.googletag.pubads().setPublisherProvidedId(window.globalTI_SID_MD5),window.googletag.enableServices(),e.state.enabledService=!0,e.log(e.dfpUtil.logTypes.info,"Services need to be enabled. - googletag.enableServices();")),e.push(function(){h().push(function(){e.log(e.dfpUtil.logTypes.info,"gpt .display() - "+t.id),t.tracking.displayActual=(0,g.recordNow)(),window.googletag.display(t.id),t.debugcode.push("googletag.display('"+t.id+"');"),e.fireEvent("slotAfterDisplay",t)})})})})},e.getSlotTargeting=function(t){var e=this,i=t.getTargetingKeys(t).reduce(function(e,i){return s(e,o({},i,t.getTargeting(i)))},{}),n=Object.keys(this.config.setTargeting).reduce(function(t,i){return s(t,o({},i,e.config.setTargeting[i]))},{});return"\nTargeting ----\nGLOBAL: "+JSON.stringify(n)+"\nSLOT: "+JSON.stringify(i)+"\n ------\n"},e.refresh=function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,i=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(!1===this.state.isValidTraffic)return void this.log(this.dfpUtil.logTypes.refresh,"refresh() not fired - IVT - invalid traffic indentified.");this.push(function(){h().push(function(){t.fireEvent("refresh",e),t.log(t.dfpUtil.logTypes.refresh,"refresh() slots: "+e);var n=null;if(null!==e)try{"string"==typeof e?n=[t.getAdSlot(e).dfpSlot]:Array.isArray(e)&&(n=e.reduce(function(e,i){return"string"==typeof i&&e.push(t.getAdSlot(i).dfpSlot),e},[]))}catch(e){t.log(t.dfpUtil.logTypes.error,"Error refreshing slots: "+e)}Array.isArray(n)&&n.forEach(function(e){e.tracking={define:(0,g.recordNow)()},t.addSlotTargeting(e,{ad_refresh:!0})}),t.push(function(){t.push(function(){h().push(function(){t.fireEvent("slotRefresh",n),t.log(t.dfpUtil.logTypes.refresh,"dfp refreshing slots"),window.googletag.pubads().refresh(n,{changeCorrelator:i})})})})})})},e.destroy=function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this.push(function(){h().push(function(){t.fireEvent("destroy",e),t.log(t.dfpUtil.logTypes.info,"destroy() slots: "+(Array.isArray(e)?e.join(","):e));var i=null,n=[];if(null!==e)try{n="string"==typeof e?[e]:e,i=n.reduce(function(e,i){return"string"==typeof i&&e.push(t.getAdSlot(i).dfpSlot),e},[])}catch(e){t.log("Error destroying slots: "+e)}Array.isArray(i)&&i.forEach(function(e){var i=t.getAdUnitBySlot(e);i.tracking.destroy=(0,g.recordNow)(),t.state.destroyedSlots.push(t.getAdSlot(i.id,!0))}),t.fireEvent("slotDestroy",i),t.log(t.dfpUtil.logTypes.info,"dfp destroying slots"),null===i?(window.googletag.destroySlots(),t.state.destroySlots=t.state.slots,t.state.slots=[]):window.googletag.destroySlots(i)})})},e.updateCorrelator=function(){var t=this;this.log(this.dfpUtil.logTypes.info,"updateCorrelator()"),h().push(function(){t.fireEvent("updateCorrelator"),window.googletag.pubads().updateCorrelator()})},e.log=function(t,e){var i=d.getDebugMode();i=i?i.split(","):["true"],!d.isDebugMode()||"true"!==i[0]&&-1===i.indexOf(t)||this.fireEvent("logMsg",e)},e.getEvents=function(){return p.default.events},e.fireEvent=function(t,e,i){var n=s({arg:e,dfp:this},i),o=void 0;"function"==typeof window.CustomEvent?o=new window.CustomEvent("dfp."+t,{detail:n}):(o=document.createEvent("CustomEvent"),o.initCustomEvent("dfp."+t,!0,!0,n)),window.dispatchEvent(o)},new t};var l=i(0),d=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}(l),c=i(1),u=i(2),f=n(u),g=i(3),p=n(g),h=e.getGptCmd=function(){return f.default.getWindow().googletag.cmd},v=/\//g,y=e.truncateZone=function(t){for(var e=[],i=0;i>-1;)(i=t.indexOf("/",i))>-1&&(e.push(i),i++);return e.length>3?t.substring(e[0],e[2]+1)+t.substring(e[2]+1).replace(v,"_"):t}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){t.slotOnload.push(o),t.onTagResponse.push(r)};var n=!1,o=function(t,e){if(!n&&void 0!==t.state.slots[1]&&t.state.slots[1].id===e.slot.getSlotElementId()&&window.analytics){var i=t.getAdUnitBySlot(e.slot);window.analytics.track("First Ad Loaded",{loadTime:i.tracking.slotOnload,contentType:Array.isArray(t.config.setTargeting.ctype)?t.config.setTargeting.ctype[0]:t.config.setTargeting.ctype,timeIncBrand:t.config.setTargeting.domain}),n=!0}},r=function(t,e){var i=t.state.slots.some(function(t){return t.tracking&&t.tracking.display});window.analytics&&window.analytics.track("TAG Response",{isValidTraffic:t.state.isValidTraffic,responseTime:e,displayCalled:i,timeIncBrand:t.config.setTargeting.domain})};t.exports=e.default},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){t.defineSlot.push(r)};var n=["1x5","5x5","300x140","256x180","480x100","480x101","481x100","481x101","482x100","483x100","484x100","485x100","486x100","487x100","488x100"],o=["cmpos","cmtyp","strnativekey"],r=function(t,e){!0===t.config.halt&&((Array.isArray(e.size[0])&&e.size.some(function(t){return-1!==n.indexOf(t.join("x"))})||-1!==n.indexOf(e.size.join("x")))&&(e.ignore=!0),e.targeting&&Object.keys(e.targeting).some(function(t){return-1!==o.indexOf(t)})&&(e.ignore=!0),e.sitename&&e.sitename.match(/^cm\./)&&(e.ignore=!0))};t.exports=e.default},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o=i(17),r=i(18),a=i(1),s=i(0),l=void 0,d=[],c=[],u={},f={},g={},p=!1,h=0,v=!1,y=!1,m=!1,w=function(t){var e=!1;return Array.isArray(t.size)&&(e=t.size.some(function(t){var e=t.join("x");return void 0!==g[e]&&g[e]>=3}),e&&(g={}),t.size.forEach(function(t){var e=t.join("x");void 0===g[e]?g[e]=1:g[e]++})),e},S=function t(){p||(l.unsubscribe("scroll",t),m=!1),A()},b=function(){m||(m=!0,l.subscribe("scroll",S))},x=function(t){var e=1,i=e,n=!1;return void 0!==t.position&&(e=t.position,n=!0),Array.isArray(t.adUnit.size)&&t.adUnit.size.forEach(function(t){var o=t.join("x");void 0===u[o]?u[o]=e:u[o]++,n&&(u[o]=e),u[o]>i&&(i=u[o])}),i},T=function(t){return x(t)},E=function(t){c.forEach(function(e,i,n){var o=l;if(!n[i].defined&&e.priority===t){if(void 0!==e.lazy){var r=+e.lazy;if(!(0,a.getElementInViewPort)(e.el,r,!0))return p=!0,void b()}e.el.dataset.tgxposition=e.position=e.adUnit.targeting.pos=T(e),e.updatecorrelator&&(o.push(function(){o.updateCorrelator()}),g={}),w(e.adUnit)&&o.push(function(){o.updateCorrelator()}),o.push(function(){o.defineSlot(e.adUnit)}),n[i].defined=!0}})},k=function(){var t=l.config.viewGracePx||2e3,e=l,i=[];c.forEach(function(e,n,o){e.defined&&void 0!==e.lazy&&((0,a.getElementInViewPort)(e.el,t,!0)||(p=!0,b(),o[n].defined=!1,i.push(e.adUnit.id)))}),i.length&&e.push(function(){e.destroy(i)})},A=function(){p=!1,l.config.optlazy&&k(),[1,2,3,4,5,6].every(function(t){return!(t>3&&"loading"===document.readyState||t>4&&("loading"===document.readyState||"interactive"===document.readyState)||t>5&&"complete"===!document.readyState||(E(t),0))})},_=function(t){var e={adUnit:{},el:t,defined:!1,autoload:!0};e.adUnit.id=t.getAttribute("id");var i=t.dataset.dimensions;i&&(e.adUnit.size=i.split(";").map(function(t){var e=t.split("x");return[+e[0],+e[1]]}));try{e.adUnit.targeting=t.dataset.tgxtargeting?JSON.parse(decodeURIComponent(t.dataset.tgxtargeting)):{}}catch(t){e.adUnit.targeting={}}"object"!==n(e.adUnit.targeting)&&(e.adUnit.targeting={});var o=t.dataset.tgxcmtyp;o&&(e.adUnit.sitename="cm."+f.sitename,e.adUnit.targeting.cmtyp=o);var r=t.dataset.tgxcmpos;r&&(e.adUnit.targeting.cmpos=r);var s=t.dataset.tgxnativekey;s&&(e.adUnit.targeting.strnativekey=s),t.dataset.tgxcompanion&&(e.adUnit.companion=!0);var l=t.dataset.tgxposition;l&&(e.position=+l);var d=t.dataset.tgxtrack;d&&("false"!==d&&"0"!==d||(d=!1),e.adUnit.trackView=!!d);var c=t.dataset.tgxlazy;c&&(e.lazy=c);var u=t.dataset.tgxsticky;u&&(e.sticky=u);var g=t.dataset.tgxupdatecorrelator;g&&(e.updatecorrelator=g);var p=t.dataset.tgxautoload;return p&&(e.autoload=(0,a.getStringBool)(p)),e.priority=t.dataset.tgxpriority?+t.dataset.tgxpriority:2,t.dataset.tgxexclusive&&(e.exclusive=!0),e},O=function(){var t=document.querySelectorAll("nav.main");return!!t.length&&t[0]},I=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"main.article, main.gallery, .ad-sticky-rail-container",i=t?t.closest(e):null;if(null!==i)return i;var n=document.querySelectorAll(e);return!!n.length&&n[0]},C=function(t){var e=window.getComputedStyle(t,null).display;return"none"===e?e:([[0,767,"mobile-ad"],[768,1161,"tablet-ad"],[1024,1/0,"desktop-only"],[1162,1/0,"desktop-ad"]].some(function(i){if((0,a.hasClass)(t,i[2])){e="none";var n=i[1]<1/0?"(min-width: "+i[0]+"px) and (max-width: "+i[1]+"px)":"(min-width: "+i[0]+"px)";if(window.matchMedia(n).matches)return e="",!0}return!1}),e)},P=function(t,e){var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=-1;return t.some(function(t,i){return t.adUnit.id===e.adUnit.id&&(n=i,!0)}),i&&n>-1&&t.splice(n,1,e),n},D=function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=document.getElementsByClassName("ad");Array.from(e).forEach(function(e){if(!(0,a.hasClass)(e,"tgx-processed")||t){e.classList?e.classList.add("tgx-processed"):e.className+=" tgx-processed";var i=C(e),n=void 0;n=-1===P(d,_(e))?d.push(_(e)):P(d,_(e),!0)+1;var r=d[n-1].autoload;if("none"!==i&&r){var s=void 0;s=-1===P(c,d[n-1])?c.push(d[n-1]):P(c,d[n-1],!0)+1,void 0!==c[s-1].sticky&&("header"===c[s-1].sticky&&(0,o.stickyHeader)(c[s-1],O(),l),"header-fixed"===c[s-1].sticky&&(0,o.stickyHeader)(c[s-1],O(),l,!0),"rail"===c[s-1].sticky&&(0,o.stickyRail)(c[s-1],I(c[s-1].el),l,"top",O()),"rail-bottom"===c[s-1].sticky&&(0,o.stickyRail)(c[s-1],I(c[s-1].el),l,"bottom",O()),"well"===c[s-1].sticky&&(0,o.stickyWell)(c[s-1],I(c[s-1].el),l,"top",O()))}}})},z=function(){var t=O();if(t){var e=t.getBoundingClientRect().bottom;(0,o.setStickyPoints)({top:e})}},U=function(t){D("boolean"==typeof t&&t),A(),z()},R=function(){y&&c.forEach(function(t){t.exclusive&&t.el.parentElement&&(0,a.addClass)(t.el.parentElement.parentElement,"closed")})},L=function(){var t=+l.config.minimumAdRefreshTime||2e3,e=Date.now()-v;h++,1===h&&e>t?(y=!0,R()):1===h&&e<t&&(y=!0,setTimeout(R,t-e))},N=function(){h--,v=Date.now(),h<=0&&(y&&(y=!1),c.forEach(function(t){t.exclusive&&t.el.parentElement&&(l.refresh([t.adUnit.id]),(0,a.removeClass)(t.el.parentElement.parentElement,"closed"))}))},B=function(){var t=document.getElementById("tgx-script");f={sitename:t.dataset.tgxsitename||"tim",cmsitename:t.dataset.tgxcmsitename||"cm.tim",zone:t.dataset.tgxzone||"",setTargeting:t.dataset.tgxtargeting?JSON.parse(decodeURIComponent(t.dataset.tgxtargeting)):"",optlazy:!t.dataset.tgxoptlazy||(0,a.getStringBool)(t.dataset.tgxoptlazy)},t.dataset.tgxdfpid&&(f.dfpId=t.dataset.tgxdfpid),l.init(f),U(),document.addEventListener("readystatechange",U,!0),document.addEventListener("DOMContentLoaded",U,!0),document.addEventListener("load",U,!1),b(),l.subscribe("inView",L),l.subscribe("outView",N)},M=function(t){this._dfp=t,this.loadAd()};M.prototype.loadAd=function(t){if(void 0!==t)return t},e.default=function(t){var e=new M(t);l=t,t.constructor.prototype.loadAd=e.loadAd,t.constructor.prototype.processAds=U,t.constructor.prototype.galleryChange=function(t,e){return(0,r.galleryChange)(t,e,l)},l.log(s.logTypes.info,"Scriptless"),B()},t.exports=e.default},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.setStickyPoints=e.stickyWell=e.stickyRail=e.stickyHeader=void 0;var n=i(1),o=!1,r=50,a=0,s=[],l=[],d=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{top:50,offset:0},e=!1;void 0!==t.top&&t.top!==r&&(r=t.top,e=!0),void 0!==t.offset&&t.offset!==a&&(a=t.offset,e=!0),e&&l.forEach(function(t){t.call(void 0)})},c=function(t,e){var i=t.indexOf(e);return t.filter(function(t,n){return t.containerEl.el===e.containerEl.el&&t.stickyType===e.stickyType&&n<i})},u=function(t,e){var i=t.indexOf(e);return t.filter(function(t,n){return t.containerEl.el===e.containerEl.el&&t.stickyType===e.stickyType&&n>i})},f=function(){if(!o){var t=".tgx-sticky-header-wrapper {transition: height 600ms ease-in-out, opacity 600ms ease-in-out; position: fixed; left: 0; right: 0; z-index: 3000;}\n  .tgx-close-header {height: 0; opacity: 0;}\n  .tgx-sticky-rail {position: fixed !important;}",e=document.head||document.getElementsByTagName("head")[0],i=document.createElement("style");i.type="text/css",i.styleSheet?i.styleSheet.cssText=t:i.appendChild(document.createTextNode(t)),e.appendChild(i),o=!0}},g=function(t,e,i,n){this.dfp=i,this.adObj=t,this.stickyContainer={el:this.adObj.el.parentElement,rect:this.adObj.el.parentElement.getBoundingClientRect()},this.adContainer={el:this.stickyContainer.el.parentElement,rect:this.stickyContainer.el.parentElement.getBoundingClientRect()},e&&(this.fixtoEl={el:e,rect:e.parentElement.getBoundingClientRect()},this.keepFixed=n||!1,this.active=!1,this.stickyAtY=!1,this.adRendered=!1,this.stickyDuration=3e3,this.finished=!1,this.run())};g.prototype.run=function(){var t=this,e=0,i=!1,n=void 0,o=this.onScroll=function(){var o=window.scrollY,r=o-e;if(!(Math.abs(r)<3||t.finished||(i||(t.fixtoEl.rect=t.fixtoEl.el.getBoundingClientRect(),t.adContainer.rect=t.adContainer.el.getBoundingClientRect(),i=!0,n=t.fixtoEl.rect.bottom),t.stickyAtY<window.scrollY&&t.active))){var a=t.adContainer.el.getBoundingClientRect().top;a>n&&t.active&&t.removeSticky(),a<=n&&!t.active&&(t.applySticky(),t.stickyAtY=window.scrollY),e=o}};f();var r=this.keepFixed?void 0:setTimeout(this.stickyFinished.bind(this),15e3);window.addEventListener("dfp.slotRenderEnded",function(e){clearTimeout(r),e.detail.slotId===t.adObj.adUnit.id&&(t.adRendered=!0,t.active&&(t.stickyContainer.el.rect=t.stickyContainer.el.getBoundingClientRect(),t.adContainer.el.style.height=t.stickyContainer.el.rect.height+"px",d({offset:t.stickyContainer.el.rect.height}),t.keepFixed||setTimeout(function(){t.stickyFinished()},t.stickyDuration)))}),this.dfp.subscribe("scroll",o)},g.prototype.applySticky=function(){var t=this;this.adContainer.rect=this.adContainer.el.getBoundingClientRect(),this.adContainer.el.style.height=this.adContainer.rect.height+"px";var e=this.stickyContainer.el;(0,n.addClass)(e,"tgx-sticky-header-wrapper"),(0,n.addClass)(e,"outer"),e.style.top=this.fixtoEl.rect.bottom+"px",this.active=!0,this.stickyContainer.rect=e.getBoundingClientRect(),d({offset:+this.stickyContainer.rect.height}),this.adRendered&&this.stickyDuration>0&&!this.keepFixed&&setTimeout(function(){t.stickyFinished()},this.stickyDuration)},g.prototype.stickyFinished=function(){var t=this,e=this.stickyContainer.el;(0,n.addClass)(e,"tgx-close-header"),this.finished=!0,this.dfp.unsubscribe("scroll",this.onScroll),setTimeout(function(){t.removeSticky()},600)},g.prototype.removeSticky=function(){var t=this.stickyContainer.el;(0,n.removeClass)(t,"tgx-sticky-header-wrapper"),(0,n.removeClass)(t,"outer"),t.style.top="",this.adContainer.el.style.height="",(0,n.removeClass)(t,"tgx-close-header"),this.active=!1,d({offset:0})};var p=function(t,e,i){var n=this,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"top",r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"rail";s.push(this),this.dfp=i,this.adObj=t,this.stickyType=r,this.adElement={el:this.adObj.el,rect:this.adObj.el.getBoundingClientRect()},this.stickyContainer={el:this.adObj.el.parentElement,rect:this.adObj.el.parentElement.getBoundingClientRect()},e&&(this.containerEl={el:e,rect:e.getBoundingClientRect()},this.active=!1,this.fixed=!1,this.absolute=!1,this.stickyAtY=!1,this.finished=!1,this.stickyPosition=o,this.bottomPadding=16,this.higherStickyUnits=c(s,this),this.setPosition(),this.run(),l.push(function(){n.setPosition(),n.active&&(n.adElement.el.style.top=n.stickPoint+"px")}))};p.prototype.setPosition=function(){this.topPadding=r+a+10,this.higherStickyUnits.length&&(this.topPadding=this.higherStickyUnits.reduce(function(t,e){return t+e.stickyContainer.rect.height},this.topPadding)),this.stickPoint=window.innerHeight-this.bottomPadding,"center"===this.stickyPosition?this.stickPoint=window.innerHeight/2-this.stickyContainer.rect.height/2:"top"===this.stickyPosition&&(this.stickPoint=this.topPadding)},p.prototype.run=function(){var t=this,e=this,i=0,n=!1,o=0,r=function(){var r=window.scrollY,a=r-i;if(!(Math.abs(a)<10)){n||(n=!0),e.stickyContainer.rect=e.stickyContainer.el.getBoundingClientRect();var l=u(s,e),d=l.reduce(function(t,e){return t+e.adElement.rect.height},0);if("bottom"===e.stickyPosition?(e.stickyContainer.rect.bottom>0&&e.stickyContainer.rect.bottom<=e.stickPoint&&!t.active&&e.applySticky(),e.active&&e.stickyContainer.rect.bottom>0&&e.stickyContainer.rect.bottom>e.stickPoint&&e.removeSticky()):(!t.active&&e.stickyContainer.rect.top<=e.stickPoint&&e.applySticky(),e.active&&e.stickyContainer.rect.top>e.stickPoint&&e.removeSticky()),e.active&&e.fixed&&"well"!==e.stickyType){e.containerEl.rect=e.containerEl.el.getBoundingClientRect();var c=e.stickPoint,f=window.screen.height+100;e.containerEl.rect.bottom<f&&(e.adElement.rect=e.adElement.el.getBoundingClientRect()),"bottom"!==e.stickyPosition&&(c=e.stickPoint+e.adElement.rect.height+d),e.containerEl.rect.bottom<c&&(e.removeSticky(),e.applyStickyBottom())}else if(e.active&&e.absolute){var g=e.stickPoint;"bottom"!==e.stickyPosition&&(g=e.stickPoint+e.adElement.rect.height+d),e.containerEl.rect=e.containerEl.el.getBoundingClientRect(),e.containerEl.rect.bottom>g&&(e.removeSticky(),e.applySticky()),Math.abs(e.containerEl.rect.height)!==Math.abs(o)&&e.applyStickyBottom(),o=e.containerEl.rect.height}i=r}};f(),window.addEventListener("dfp.slotRenderEnded",function(t){t.detail.slotId===e.adObj.adUnit.id&&s.forEach(function(t){return t.setPosition()})}),this.dfp.subscribe("scroll",r)},p.prototype.applySticky=function(){this.stickyContainer.rect=this.stickyContainer.el.getBoundingClientRect(),this.stickyContainer.el.style.height=this.stickyContainer.rect.height+"px",(0,n.addClass)(this.adElement.el,"tgx-sticky-rail"),"bottom"===this.stickyPosition?this.adElement.el.style.bottom="0px":this.adElement.el.style.top=this.stickPoint+"px",this.active=!0,this.fixed=!0},p.prototype.removeSticky=function(){var t=this.adElement.el;(0,n.removeClass)(t,"tgx-sticky-rail"),t.style.position="",t.style.top="",t.style.bottom="",this.stickyContainer.el.style.height="",this.active=!1,this.fixed=!1,this.absolute=!1,this.justAppliedBottom=!1},p.prototype.applyStickyBottom=function(){var t=this.adElement.el;this.adElement.rect=this.adElement.el.getBoundingClientRect();var e=u(s,this),i=e.reduce(function(t,e){return t+e.adElement.rect.height},0);i=i?i+10:i;var n=window.scrollY+this.containerEl.rect.bottom-this.adElement.rect.height-i;t.style.position="absolute",t.style.top=n+"px",this.adElement.rect=this.adElement.el.getBoundingClientRect(),this.containerEl.rect=this.containerEl.el.getBoundingClientRect(),this.adElement.rect.bottom>this.containerEl.rect.bottom-i&&(n-=this.adElement.rect.bottom-(this.containerEl.rect.bottom-i)),t.style.top=n+"px",this.active=!0,this.absolute=!0},e.stickyHeader=function(t,e,i,n){return new g(t,e,i,n)},e.stickyRail=function(t,e,i,n){return new p(t,e,i,n)},e.stickyWell=function(t,e,i,n){return new p(t,e,i,n,"well")},e.setStickyPoints=d},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.galleryChange=void 0;var n=i(3),o=i(0),r="data-tgxinterstitial",a=["horizontal"],s=(0,n.recordNow)(),l=null,d=function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[3],o=n.slice(-1)[0],r=0;return t+1!==e&&(n.reduce(function(e,i){return t>=e&&(o=i,r=-e),e+i},0),(t+r)%o==0&&0===i||(t+r)%o-o===i)},c=function(t,e,i){var n=t.attr("data-tgxinterstitialid"),o=t.find("#"+n);"false"===o.attr("data-tgxautoload")?(o.attr("data-tgxautoload",!0),o.removeClass("tgx-processed"),i.processAds()):i.push(function(){i.getAdSlot(n).dfpSlot.setTargeting("slide",e+1),i.refresh(n,!0)})},u=function t(e,i){var r=i.config.galleryMinimalRefreshInterval||2e3;if(null!==l&&(clearTimeout(l),l=null),(0,n.recordNow)()-s<r)return void(l=setTimeout(function(){t(e,i)},2e3));s=(0,n.recordNow)();var a=["ad-101x1_970x90_728x90_ATF","ad-300x600_300x250_160x600_LL_1","ad-300x250_RR_LL_2"].filter(function(t){return(0,o.hasSlot)(i.state.slots,t)});window.time_dfp.refresh(a,e)},f=function(t,e,i){var n=+e.attr("data-tgxlastindex"),o=+e.attr("data-tgxsecondlastindex"),s=e.attr(r),l=e.attr("data-tgxtagged"),f=e.attr("data-gallery-type"),g=i.config.galleryAdFreqency||[3],p=!0;if(-1!==a.indexOf(f)){d(t.item.index,t.item.count,0,g)&&n<t.item.index&&"true"!==s?(e.attr(r,"set"),c(e,t.item.index,i),u(!1,i),p=!1,e.trigger("to.owl.carousel",n,0)):d(t.item.index,t.item.count,0,g)&&n<t.item.index&&"true"===s&&d(o,t.item.count,0,g)?e.attr(r,"false"):d(t.item.index,t.item.count,-2,g)&&n>t.item.index&&"true"===s&&d(o,t.item.count,0,g)?(e.trigger("to.owl.carousel",n,0),e.attr(r,"remove")):d(t.item.index,t.item.count,-1,g)&&n>t.item.index&&-1===["set","true"].indexOf(s)?(c(e,t.item.index,i),u(!1,i),p=!1,e.attr(r,"true")):d(t.item.index,t.item.count,-1,g)&&n>t.item.index&&"true"===s&&(e.trigger("to.owl.carousel",n,0),e.attr(r,"remove"));var h=d(t.item.index,t.item.count,0,g)&&n<t.item.index&&"true"!==s,v=d(t.item.index,t.item.count,-1,g)&&n>t.item.index&&!(-1!==["set","true"].indexOf(s)),y=e.attr(r);l&&!h&&!v&&p&&-1===["set","true"].indexOf(y)&&u(!0,i),e.attr("data-tgxtagged",!0)}};e.galleryChange=function(t,e,i){if("change"===t.type){var n=+e.attr("data-tgxlastindex");e.attr("data-tgxsecondlastindex",n),e.attr("data-tgxlastindex",t.item.index)}else null!==t.item.index&&f(t,e,i)}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(1),o=i(0),r=void 0,a=["scroll","inView","outView","resize","viewable"],s={},l=[],d=function(t,e){return!(a.indexOf(t)<0||(s[t].push(e),0))},c=function(t,e){if(a.indexOf(t)<0)return!1;var i=s[t].findIndex(function(t){return t===e});return i>-1&&s[t].splice(i,1),!0},u=function(t){s.scroll.forEach(function(e){try{e.call(void 0,t)}catch(t){r.log(o.logTypes.error,"error in scroll event manager")}})},f=function(){var t=+r.config.pxDivisor||1e3;r.state.slots.forEach(function(e){var i=e.adUnit.id;if(e.adUnit.trackView&&l.indexOf(i)<0){var a=document.getElementById(i),d=a.getBoundingClientRect();a&&(0,n.getElementInViewPort)(a,-d.height/t,!0,d)&&(l.push(i),s.inView.forEach(function(t){try{t.call(void 0,e)}catch(t){r.log(o.logTypes.error,"error in inView event manager")}}),r.fireEvent("inView",e,{eventManager:void 0}))}}),l.forEach(function(e){var i=document.getElementById(e),a=i.getBoundingClientRect();i&&!(0,n.getElementInViewPort)(i,-a.height/t,!0,a)&&(l.splice(l.indexOf(e),1),s.outView.forEach(function(t){try{t.call(void 0,r.getAdSlot(e))}catch(t){r.log(o.logTypes.error,"error in outView event manager")}}),r.fireEvent("outView",r.getAdSlot(e),{eventManager:void 0}))})},g=function(){a.forEach(function(t){s[t]=[]}),window.addEventListener("scroll",u),d("scroll",f)};e.default=function(t){r=t,r.constructor.prototype.subscribe=d,r.constructor.prototype.unsubscribe=c,g()},t.exports=e.default},,,,,,,,,,function(t,e,i){t.exports=i(30)},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=i(5),r=n(o),a=i(16),s=n(a),l=i(19),d=n(l),c=(0,r.default)();(0,d.default)(c),(0,s.default)(c),e.default=c,t.exports=e.default}])});